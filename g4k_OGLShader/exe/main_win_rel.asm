; Listing generated by Microsoft (R) Optimizing Compiler Version 19.40.33812.0 

	TITLE	C:\Users\Tonik\source\repos\asm24-4k\g4k_OGLShader\bin\Release\main_win_rel.obj
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_C@_0BAPG@FKGOJCAO@?$CDversion?5430?6uniform?5float?5iGlo@ ; `string'
PUBLIC	??_C@_0CLN@CHDMPCJO@?$CDversion?5430?6varying?5vec2?5fragC@ ; `string'
PUBLIC	__fltused
_BSS	SEGMENT
__fltused DD	01H DUP (?)
_BSS	ENDS
CONST	SEGMENT
?pfd@@3UtagPIXELFORMATDESCRIPTOR@@B DW 028H		; pfd
	DW	01H
	DD	025H
	DB	00H
	DB	020H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	020H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DD	00H
	DD	00H
	DD	00H
?wavHeader@@3QBHB DD 046464952H				; wavHeader
	DD	0776924H
	DD	045564157H
	DD	020746d66H
	DD	010H
	DD	020001H
	DD	0ac44H
	DD	02b110H
	DD	0100004H
	DD	061746164H
	DD	0eed200H
CONST	ENDS
;	COMDAT ??_C@_0CLN@CHDMPCJO@?$CDversion?5430?6varying?5vec2?5fragC@
CONST	SEGMENT
??_C@_0CLN@CHDMPCJO@?$CDversion?5430?6varying?5vec2?5fragC@ DB '#version '
	DB	'430', 0aH, 'varying vec2 fragCoord;', 0aH, 'uniform sampler2D'
	DB	' gm_BaseTexture;', 0aH, '#define px (vec2(7.0)/vec2(1280.,720'
	DB	'.))', 0aH, 'vec4 GetBloom(vec2 uv){float numSamples=1.;vec4 c'
	DB	'olor=vec4(0);for(float x=-5.;x<=5.;x+=1.)for(float y=-5.;y<=5'
	DB	'.;y+=1.){vec4 addColor=texture2D(gm_BaseTexture,uv+vec2(x,y)*'
	DB	'px);if(max(addColor.x,max(addColor.y,addColor.z))>.8){float d'
	DB	'ist=length(vec2(x,y))+1.;vec4 glowColor=max(addColor*128./pow'
	DB	'(dist,2.),vec4(0));if(max(glowColor.x,max(glowColor.y,glowCol'
	DB	'or.z))>.9)color+=glowColor,numSamples+=1.;}}return color/numS'
	DB	'amples;}void main(){vec2 iResolution = vec2(2.,2.);vec2 uv=fr'
	DB	'agCoord.xy/iResolution.xy + vec2(.5,.5);vec4 box=texture2D(gm'
	DB	'_BaseTexture,uv);gl_FragColor=box+.05*GetBloom(uv);}', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BAPG@FKGOJCAO@?$CDversion?5430?6uniform?5float?5iGlo@
CONST	SEGMENT
??_C@_0BAPG@FKGOJCAO@?$CDversion?5430?6uniform?5float?5iGlo@ DB '#version'
	DB	' 430', 0aH, 'uniform float iGlobalTime;mat3 rotate_x(float a)'
	DB	'{float sa=sin(a);a=cos(a);return mat3(vec3(1,0,0),vec3(0,a,sa'
	DB	'),vec3(0,-sa,a));}vec3 mandelboxPosition;', 0aH, '#define BPM'
	DB	' 119.', 0aH, '#define BPS (60./BPM)', 0aH, '#define DEL 0.05', 0aH
	DB	'#define TT iGlobalTime-DEL', 0aH, 'float revsaw(float beats){'
	DB	'beats*=BPS;return smoothstep(0.,1.,1.-mod(TT,beats)/beats);}f'
	DB	'loat square(){float beats=32.*BPS;return mod(TT,beats)/beats<'
	DB	'.5?0.:1.;}float beatstep(float beats){beats*=BPS;return TT<be'
	DB	'ats?0.:1.;}float sdTorus(vec3 p,vec2 t){return length(vec2(le'
	DB	'ngth(p.xz)-t.x,p.y))-t.y;}float sdBox(vec3 p,vec3 b){p=abs(p)'
	DB	'-b;return length(max(p,0.))+min(max(p.x,max(p.y,p.z)),0.);}ve'
	DB	'c3 repeat(vec3 pos,vec3 s){return pos-s*round(pos/s);}float o'
	DB	'pSubtraction(float d1,float d2){return max(d1,-d2);}void sphe'
	DB	'reFold(inout vec3 z,inout float dz){float r2=dot(z,z);if(r2<1'
	DB	'.7){float temp=1.7/r2;z*=temp;dz*=temp;}}void boxFold(inout v'
	DB	'ec3 z,inout float dz){z=clamp(z,-1.,1.)*2.-z;}float mandelbox'
	DB	'_de(vec3 z){mandelboxPosition=z;float Scale=-.85-sin(iGlobalT'
	DB	'ime*.002)*.45;vec3 offset=z;float dr=20.;for(int n=0;n<13;n++'
	DB	')boxFold(z,dr),sphereFold(z,dr),z=Scale*z+offset,dr=dr*abs(Sc'
	DB	'ale)+1.;Scale=length(z);return Scale/abs(dr);}float scene(vec'
	DB	'3 pos){float d1=mandelbox_de((pos+vec3(30,cos(iGlobalTime*.00'
	DB	'25)*30.,1))*(sin(iGlobalTime*.025)+1.5)*.025),size1=6.+beatst'
	DB	'ep(140.)*2.,size2=2.5+beatstep(128.)*3.-beatstep(140.)*2.;d1='
	DB	'min(opSubtraction(d1,sdTorus(pos,vec2(size1,size2))),length(r'
	DB	'epeat(pos+vec3(sin(iGlobalTime)*1.6,1.5,cos(iGlobalTime)*1.6)'
	DB	',vec3(6,5,6)))-.7);vec3 bsize=vec3(6,6,2)*(1.5-square()*.5);r'
	DB	'eturn opSubtraction(d1,sdBox(repeat(vec3(0,0,5.*sin(iGlobalTi'
	DB	'me*.1))+pos*rotate_x(iGlobalTime*.1),vec3(10)),bsize));}vec3 '
	DB	'calcNormal(vec3 pos){vec2 e=vec2(1,-1)*.5773;return normalize'
	DB	'(e.xyy*scene(pos+e.xyy*5e-4)+e.yyx*scene(pos+e.yyx*5e-4)+e.yx'
	DB	'y*scene(pos+e.yxy*5e-4)+e.xxx*scene(pos+e.xxx*5e-4));}float h'
	DB	'ash(float p){vec3 p3=fract(vec3(p)*.1031);p3+=dot(p3,p3.yzx+1'
	DB	'9.19);return fract((p3.x+p3.y)*p3.z);}float ambientOcclusion('
	DB	'vec3 p,vec3 n){float ao=0.;for(int i=0;i<9;i++){float l=hash('
	DB	'float(i))*2.5;ao+=(l-max(scene(p+n*l),0.))/2.5*2.5;}return cl'
	DB	'amp(1.-ao/9.,.05,1.);}vec3 stripes(vec3 pos){float stripe=sin'
	DB	'(pos.x*7.)*.4+.6;return vec3(1,stripe,stripe*.75);}int numRib'
	DB	'bons(){return 4+int(beatstep(128.))*3;}int numRibbonStacks(){'
	DB	'return 1+int(beatstep(124.))*4-int(beatstep(160.))*3;}float r'
	DB	'ibbonSpacing(){return 6.-beatstep(124.)*2.5;}vec3 ribbonColor'
	DB	'(float n){return vec3(mod(n,7.)/14.,mod(n,5.)/5.,.5+mod(n,3.)'
	DB	'/6.);}vec2 ribbonscene(vec3 p){float size=revsaw(1.)*.05+.05+'
	DB	'beatstep(120.)*.05,d=1e4,ld=d,ribbonStart=float(-numRibbons()'
	DB	')*ribbonSpacing()/2.+6.,n=0.;for(int i=0;i<numRibbons();++i){'
	DB	'float fi=float(i);for(int j=0;j<numRibbonStacks();++j){float '
	DB	'fj=float(j+1);d=min(d,sdBox(p+vec3(fj*ribbonSpacing()+3.*sin('
	DB	'iGlobalTime*.2*fj)+cos(p.z*.5),ribbonStart+ribbonSpacing()*fi'
	DB	'+sin(p.z*.5),ribbonStart+fi*ribbonSpacing()*2.*sin(iGlobalTim'
	DB	'e*.25*fj)),vec3(size,size,4.+beatstep(120.)*6.)));if(d<ld)n=f'
	DB	'loat(numRibbonStacks())*fj+fi,ld=d;}}return vec2(d,n);}vec3 r'
	DB	'ibbons(vec3 rd,vec3 ro,float boxDepth){float t=0.;vec3 pos;fl'
	DB	'oat n=0.;for(int i=0;i<64;i++){pos=ro+t*rd;vec2 ribbonResult='
	DB	'ribbonscene(pos);float h=ribbonResult.x;if(h<1e-4){n=ribbonRe'
	DB	'sult.y;break;}else if(t>15.)break;t+=h;}return t<15.&&t<boxDe'
	DB	'pth?ribbonColor(n):vec3(0);}void main(){vec2 ir=vec2(1280,720'
	DB	');ir=(-ir.xy+2.*gl_FragCoord.xy)/ir.y;float an=.05*iGlobalTim'
	DB	'e+sin(iGlobalTime*.1)*ir.y*sin(iGlobalTime*.05)*2.;an*=square'
	DB	'()*2.-1.;vec3 ro=vec3(8.*cos(an),.6,8.*sin(an)),ww=normalize('
	DB	'vec3(0,sin(iGlobalTime*.5),0)-ro),uu=normalize(cross(ww,vec3('
	DB	'0,.6,.5)));ww=normalize(ir.x*uu+ir.y*normalize(cross(uu,ww))+'
	DB	'1.5*ww);an=0.;float ribsDist=1e5,n=0.;for(int i=0;i<128;i++){'
	DB	'uu=ro+an*ww;float h=scene(uu);if(h<.00015){vec2 ribResult=rib'
	DB	'bonscene(uu);ribsDist=ribResult.x;n=ribResult.y;break;}else i'
	DB	'f(an>35.)break;an+=h;}vec3 col=vec3(0);if(an<35.){vec3 nor=ca'
	DB	'lcNormal(uu);float dif=clamp(dot(nor,vec3(.7,1.2,.4)),0.,1.2)'
	DB	';dif*=dif;dif*=dif;dif*=revsaw(16.);float amb=.5+.5*dot(nor,v'
	DB	'ec3(0,.8,-.6));amb*=revsaw(16.);col=vec3(.2,.3,.5)*amb+stripe'
	DB	's(mandelboxPosition)*vec3(.9,.8,.6)*dif;col*=ambientOcclusion'
	DB	'(uu,nor);if(ribsDist<2.){float f=(2.-ribsDist)/2.;col+=f*f*f*'
	DB	'ribbonColor(n)*(revsaw(1.)*.5+.5);}col/=max(1.,uu.z*.5);}col='
	DB	'sqrt(col);col=col*.5+.5*col*col*(3.-2.*col);ro=ribbons(ww,ro,'
	DB	'an);gl_FragColor=vec4(col,an)+vec4(ro,0);}', 00H ; `string'
CONST	ENDS
PUBLIC	?entrypoint@@YGXXZ				; entrypoint
PUBLIC	??_C@_06GGHJAEBN@static@			; `string'
PUBLIC	??_C@_0BH@BOJGDFJN@glCreateShaderProgramv@	; `string'
PUBLIC	??_C@_0BC@FAPEBGID@glGenFramebuffers@		; `string'
PUBLIC	??_C@_0BD@GFHLEJGH@glBindFramebuffers@		; `string'
PUBLIC	??_C@_0BD@MIGEDNGJ@glGenRenderbuffers@		; `string'
PUBLIC	??_C@_0BD@EPOPJGFA@glBindRenderbuffer@		; `string'
PUBLIC	??_C@_0BG@EOIILGMJ@glRenderbufferStorage@	; `string'
PUBLIC	??_C@_0BF@ENLMLILA@glFramebufferTexture@	; `string'
PUBLIC	??_C@_0O@COHJKDBH@glDrawBuffers@		; `string'
PUBLIC	??_C@_0BC@CJMIBNO@glBindFramebuffer@		; `string'
PUBLIC	??_C@_0N@ICBDHBI@glUseProgram@			; `string'
PUBLIC	??_C@_0M@MLICAPOF@glUniform1f@			; `string'
PUBLIC	__real@3a83126f
PUBLIC	__real@433f0000
PUBLIC	__real@4f800000
EXTRN	__imp__Sleep@4:PROC
EXTRN	__imp__ExitProcess@4:PROC
EXTRN	__imp__ChoosePixelFormat@8:PROC
EXTRN	__imp__SetPixelFormat@12:PROC
EXTRN	__imp__wglCreateContext@4:PROC
EXTRN	__imp__wglGetProcAddress@4:PROC
EXTRN	__imp__wglMakeCurrent@8:PROC
EXTRN	__imp__wglSwapLayerBuffers@8:PROC
EXTRN	__imp__PeekMessageA@20:PROC
EXTRN	__imp__CreateWindowExA@48:PROC
EXTRN	__imp__GetDC@4:PROC
EXTRN	__imp__ShowCursor@4:PROC
EXTRN	__imp__ChangeDisplaySettingsA@8:PROC
EXTRN	__imp__sndPlaySoundA@8:PROC
EXTRN	__imp__timeGetTime@0:PROC
EXTRN	__imp__glBindTexture@8:PROC
EXTRN	__imp__glGenTextures@8:PROC
EXTRN	__imp__glRects@16:PROC
EXTRN	__imp__glTexImage2D@36:PROC
EXTRN	__imp__glTexParameteri@12:PROC
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?music@@3PAFA DW 0776916H DUP (?)			; music
_BSS	ENDS
;	COMDAT __real@4f800000
CONST	SEGMENT
__real@4f800000 DD 04f800000r			; 4.29497e+09
CONST	ENDS
;	COMDAT __real@433f0000
CONST	SEGMENT
__real@433f0000 DD 0433f0000r			; 191
CONST	ENDS
;	COMDAT __real@3a83126f
CONST	SEGMENT
__real@3a83126f DD 03a83126fr			; 0.001
CONST	ENDS
;	COMDAT ??_C@_0M@MLICAPOF@glUniform1f@
CONST	SEGMENT
??_C@_0M@MLICAPOF@glUniform1f@ DB 'glUniform1f', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@ICBDHBI@glUseProgram@
CONST	SEGMENT
??_C@_0N@ICBDHBI@glUseProgram@ DB 'glUseProgram', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@CJMIBNO@glBindFramebuffer@
CONST	SEGMENT
??_C@_0BC@CJMIBNO@glBindFramebuffer@ DB 'glBindFramebuffer', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@COHJKDBH@glDrawBuffers@
CONST	SEGMENT
??_C@_0O@COHJKDBH@glDrawBuffers@ DB 'glDrawBuffers', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BF@ENLMLILA@glFramebufferTexture@
CONST	SEGMENT
??_C@_0BF@ENLMLILA@glFramebufferTexture@ DB 'glFramebufferTexture', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@EOIILGMJ@glRenderbufferStorage@
CONST	SEGMENT
??_C@_0BG@EOIILGMJ@glRenderbufferStorage@ DB 'glRenderbufferStorage', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@EPOPJGFA@glBindRenderbuffer@
CONST	SEGMENT
??_C@_0BD@EPOPJGFA@glBindRenderbuffer@ DB 'glBindRenderbuffer', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@MIGEDNGJ@glGenRenderbuffers@
CONST	SEGMENT
??_C@_0BD@MIGEDNGJ@glGenRenderbuffers@ DB 'glGenRenderbuffers', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@GFHLEJGH@glBindFramebuffers@
CONST	SEGMENT
??_C@_0BD@GFHLEJGH@glBindFramebuffers@ DB 'glBindFramebuffers', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@FAPEBGID@glGenFramebuffers@
CONST	SEGMENT
??_C@_0BC@FAPEBGID@glGenFramebuffers@ DB 'glGenFramebuffers', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BH@BOJGDFJN@glCreateShaderProgramv@
CONST	SEGMENT
??_C@_0BH@BOJGDFJN@glCreateShaderProgramv@ DB 'glCreateShaderProgramv', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_06GGHJAEBN@static@
CONST	SEGMENT
??_C@_06GGHJAEBN@static@ DB 'static', 00H		; `string'
CONST	ENDS
_DATA	SEGMENT
?fragmentShader@@3PBDB DD FLAT:??_C@_0BAPG@FKGOJCAO@?$CDversion?5430?6uniform?5float?5iGlo@ ; fragmentShader
?imageShader@@3PBDB DD FLAT:??_C@_0CLN@CHDMPCJO@?$CDversion?5430?6varying?5vec2?5fragC@ ; imageShader
?screenSettings@@3U_devicemodeA@@A	ORG $+32		; screenSettings
	DW	00H
	DW	00H
	DW	09cH
	DW	00H
	DD	01c0000H
	DW	00H
	ORG $+14
	DW	00H
	DW	00H
	DW	00H
	DW	00H
	DW	00H
	ORG $+32
	DW	00H
	DD	020H
	DD	0500H
	DD	02d0H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
_DATA	ENDS
; Function compile flags: /Ogspy
; File C:\Users\Tonik\source\repos\asm24-4k\g4k_OGLShader\src\main_win_rel.cpp
;	COMDAT ?entrypoint@@YGXXZ
_TEXT	SEGMENT
_frameBufferId$ = -64					; size = 4
_renderTexture$ = -60					; size = 4
_hDC$1$ = -56						; size = 4
_currentTime$1$ = -56					; size = 4
_depthbuffer$ = -52					; size = 4
_drawBuffers$ = -48					; size = 4
tv301 = -44						; size = 4
_hWnd$1$ = -44						; size = 4
_to$1$ = -40						; size = 4
_fsId$1$ = -36						; size = 4
_imgFsId$1$ = -32					; size = 4
_msg$ = -28						; size = 28
?entrypoint@@YGXXZ PROC					; entrypoint, COMDAT

; 73   : {

	sub	esp, 64					; 00000040H
	push	ebp

; 74   :     // Do NOT do this
; 75   :     // SetProcessDpiAwarenessContext( DPI_AWARENESS_CONTEXT_SYSTEM_AWARE );
; 76   : 
; 77   :     // full screen
; 78   :     if( ChangeDisplaySettings(&screenSettings,CDS_FULLSCREEN)!=DISP_CHANGE_SUCCESSFUL) return; ShowCursor( 0 );

	mov	ebp, DWORD PTR __imp__ChangeDisplaySettingsA@8
	push	4
	push	OFFSET ?screenSettings@@3U_devicemodeA@@A
	call	ebp
	test	eax, eax
	jne	$LN1@entrypoint
	push	ebx
	push	esi
	push	edi
	xor	ebx, ebx
	push	ebx
	call	DWORD PTR __imp__ShowCursor@4

; 79   :     // create window
; 80   :     HWND hWnd = CreateWindow( "static",0,WS_POPUP|WS_VISIBLE,0,0,XRES,YRES,0,0,0,0);

	push	ebx
	push	ebx
	push	ebx
	push	ebx
	push	720					; 000002d0H
	mov	ebp, 1280				; 00000500H
	push	ebp
	push	ebx
	push	ebx
	push	-1879048192				; 90000000H
	push	ebx
	push	OFFSET ??_C@_06GGHJAEBN@static@
	push	ebx
	call	DWORD PTR __imp__CreateWindowExA@48

; 81   :     HDC hDC = GetDC(hWnd);

	push	eax
	mov	DWORD PTR _hWnd$1$[esp+84], eax
	call	DWORD PTR __imp__GetDC@4
	mov	ebx, eax

; 82   :     // initalize opengl
; 83   :     SetPixelFormat(hDC,ChoosePixelFormat(hDC,&pfd),&pfd);

	mov	eax, OFFSET ?pfd@@3UtagPIXELFORMATDESCRIPTOR@@B
	push	eax
	push	eax
	push	ebx
	mov	DWORD PTR _hDC$1$[esp+92], ebx
	call	DWORD PTR __imp__ChoosePixelFormat@8
	push	eax
	push	ebx
	call	DWORD PTR __imp__SetPixelFormat@12

; 84   :     wglMakeCurrent(hDC,wglCreateContext(hDC));

	push	ebx
	call	DWORD PTR __imp__wglCreateContext@4
	push	eax
	push	ebx
	call	DWORD PTR __imp__wglMakeCurrent@8

; 85   : 
; 86   :     //wglSwapLayerBuffers( hDC, WGL_SWAP_MAIN_PLANE ); //SwapBuffers( hDC );
; 87   : 
; 88   :     // init opengl
; 89   :     const unsigned int fsId = ((PFNGLCREATESHADERPROGRAMVPROC)wglGetProcAddress("glCreateShaderProgramv"))(GL_FRAGMENT_SHADER, 1, &fragmentShader);

	mov	ebx, DWORD PTR __imp__wglGetProcAddress@4
	mov	edi, 35632				; 00008b30H
	push	OFFSET ?fragmentShader@@3PBDB
	push	1
	push	edi
	mov	esi, OFFSET ??_C@_0BH@BOJGDFJN@glCreateShaderProgramv@
	push	esi
	call	ebx
	call	eax

; 90   :     const unsigned int imgFsId = ((PFNGLCREATESHADERPROGRAMVPROC)wglGetProcAddress("glCreateShaderProgramv"))(GL_FRAGMENT_SHADER, 1, &imageShader);

	push	OFFSET ?imageShader@@3PBDB
	push	1
	push	edi
	push	esi
	mov	DWORD PTR _fsId$1$[esp+96], eax
	call	ebx
	call	eax
	mov	DWORD PTR _imgFsId$1$[esp+80], eax

; 91   : 
; 92   :     GLuint frameBufferId = 0;

	xor	esi, esi

; 93   :     ((PFNGLGENFRAMEBUFFERSPROC)wglGetProcAddress("glGenFramebuffers"))(1, &frameBufferId);

	lea	eax, DWORD PTR _frameBufferId$[esp+80]
	mov	DWORD PTR _frameBufferId$[esp+80], esi
	push	eax
	push	1
	push	OFFSET ??_C@_0BC@FAPEBGID@glGenFramebuffers@
	call	ebx
	call	eax

; 94   :     ((PFNGLBINDFRAMEBUFFERPROC)wglGetProcAddress("glBindFramebuffers"))(GL_FRAMEBUFFER, frameBufferId);

	push	DWORD PTR _frameBufferId$[esp+80]
	push	36160					; 00008d40H
	push	OFFSET ??_C@_0BD@GFHLEJGH@glBindFramebuffers@
	call	ebx
	call	eax

; 95   : 
; 96   :     GLuint renderTexture;
; 97   :     glGenTextures(1, &renderTexture);

	lea	eax, DWORD PTR _renderTexture$[esp+80]
	push	eax
	push	1
	call	DWORD PTR __imp__glGenTextures@8

; 98   :     glBindTexture(GL_TEXTURE_2D, renderTexture);

	push	DWORD PTR _renderTexture$[esp+80]
	mov	edi, 3553				; 00000de1H
	push	edi
	call	DWORD PTR __imp__glBindTexture@8

; 99   :     glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, XRES, YRES, 0, GL_RGB, GL_UNSIGNED_BYTE, 0);

	push	esi
	push	5121					; 00001401H
	mov	eax, 6407				; 00001907H
	push	eax
	push	esi
	push	720					; 000002d0H
	push	ebp
	push	eax
	push	esi
	push	edi
	call	DWORD PTR __imp__glTexImage2D@36

; 100  :     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

	mov	esi, DWORD PTR __imp__glTexParameteri@12
	mov	edi, 9728				; 00002600H
	push	edi
	push	10240					; 00002800H
	push	3553					; 00000de1H
	call	esi

; 101  :     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

	push	edi
	push	10241					; 00002801H
	push	3553					; 00000de1H
	call	esi

; 102  :     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);

	mov	edi, 10496				; 00002900H
	push	edi
	push	10242					; 00002802H
	push	3553					; 00000de1H
	call	esi

; 103  :     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

	push	edi
	push	10243					; 00002803H
	push	3553					; 00000de1H
	call	esi

; 104  : 
; 105  :     GLuint depthbuffer;
; 106  :     ((PFNGLGENRENDERBUFFERSPROC)wglGetProcAddress("glGenRenderbuffers"))(1, &depthbuffer);

	lea	eax, DWORD PTR _depthbuffer$[esp+80]
	push	eax
	push	1
	push	OFFSET ??_C@_0BD@MIGEDNGJ@glGenRenderbuffers@
	call	ebx
	call	eax

; 107  :     ((PFNGLBINDRENDERBUFFERPROC)wglGetProcAddress("glBindRenderbuffer"))(GL_RENDERBUFFER, depthbuffer);

	push	DWORD PTR _depthbuffer$[esp+80]
	mov	esi, 36161				; 00008d41H
	push	esi
	push	OFFSET ??_C@_0BD@EPOPJGFA@glBindRenderbuffer@
	call	ebx
	call	eax

; 108  :     ((PFNGLRENDERBUFFERSTORAGEPROC)wglGetProcAddress("glRenderbufferStorage"))(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, XRES, YRES);

	push	720					; 000002d0H
	push	ebp
	push	6402					; 00001902H
	push	esi
	push	OFFSET ??_C@_0BG@EOIILGMJ@glRenderbufferStorage@
	call	ebx
	call	eax

; 109  : 
; 110  :     ((PFNGLFRAMEBUFFERTEXTUREPROC)wglGetProcAddress("glFramebufferTexture"))(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, renderTexture, 0);

	push	0
	push	DWORD PTR _renderTexture$[esp+84]
	add	esi, -97				; ffffff9fH
	push	esi
	push	36160					; 00008d40H
	push	OFFSET ??_C@_0BF@ENLMLILA@glFramebufferTexture@
	call	ebx
	call	eax

; 111  :     GLenum drawBuffers[1] = { GL_COLOR_ATTACHMENT0 };
; 112  :     ((PFNGLDRAWBUFFERSPROC)wglGetProcAddress("glDrawBuffers"))(1, drawBuffers);

	lea	eax, DWORD PTR _drawBuffers$[esp+80]
	mov	DWORD PTR _drawBuffers$[esp+80], esi
	push	eax
	push	1
	push	OFFSET ??_C@_0O@COHJKDBH@glDrawBuffers@
	call	ebx
	call	eax

; 113  : 
; 114  :     // init music
; 115  :     //su_render_song(music + 22);
; 116  :     memcpy(music, wavHeader, 44);

	push	11					; 0000000bH
	pop	ecx

; 117  :     sndPlaySound((const char*)&music, SND_ASYNC | SND_MEMORY | SND_LOOP);

	push	13					; 0000000dH
	mov	esi, OFFSET ?wavHeader@@3QBHB
	mov	edi, OFFSET ?music@@3PAFA
	rep movsd
	push	OFFSET ?music@@3PAFA
	call	DWORD PTR __imp__sndPlaySoundA@8

; 118  : 
; 119  :     MSG msg;
; 120  :     long to = timeGetTime();

	call	DWORD PTR __imp__timeGetTime@0
	mov	esi, DWORD PTR __imp__glRects@16
	mov	edi, DWORD PTR _hDC$1$[esp+80]
	mov	ebp, DWORD PTR _hWnd$1$[esp+80]
	mov	DWORD PTR _to$1$[esp+80], eax
$LL4@entrypoint:

; 121  :     float currentTime = 0.f;
; 122  :     float endTime = (SU_LENGTH_IN_SAMPLES * 2 + SU_SAMPLES_PER_ROW * SU_ROWS_PER_PATTERN * 7) / SU_SAMPLE_RATE;
; 123  :     do 
; 124  :     {
; 125  :         PeekMessage(&msg,hWnd,0,0,true);

	push	1
	push	0
	push	0
	push	ebp
	lea	eax, DWORD PTR _msg$[esp+96]
	push	eax
	call	DWORD PTR __imp__PeekMessageA@20

; 126  :         currentTime = (float)(timeGetTime() - to) * 0.001f;

	call	DWORD PTR __imp__timeGetTime@0
	sub	eax, DWORD PTR _to$1$[esp+80]
	mov	DWORD PTR tv301[esp+80], eax
	fild	DWORD PTR tv301[esp+80]
	jns	SHORT $LN14@entrypoint
	fadd	DWORD PTR __real@4f800000
$LN14@entrypoint:

; 127  : 
; 128  :         ((PFNGLBINDFRAMEBUFFERPROC)wglGetProcAddress("glBindFramebuffer"))(GL_FRAMEBUFFER, frameBufferId);

	push	DWORD PTR _frameBufferId$[esp+80]
	fmul	DWORD PTR __real@3a83126f
	push	36160					; 00008d40H
	push	OFFSET ??_C@_0BC@CJMIBNO@glBindFramebuffer@
	fstp	DWORD PTR _currentTime$1$[esp+92]
	call	ebx
	call	eax

; 129  :         ((PFNGLUSEPROGRAMPROC)wglGetProcAddress("glUseProgram"))(fsId);

	push	DWORD PTR _fsId$1$[esp+80]
	push	OFFSET ??_C@_0N@ICBDHBI@glUseProgram@
	call	ebx
	call	eax

; 130  :         ((PFNGLUNIFORM1FPROC)wglGetProcAddress("glUniform1f"))(0, currentTime);

	fld	DWORD PTR _currentTime$1$[esp+80]
	push	ecx
	fstp	DWORD PTR [esp]
	push	0
	push	OFFSET ??_C@_0M@MLICAPOF@glUniform1f@
	call	ebx
	call	eax

; 131  :         glRects( -1, -1, 1, 1 );

	push	1
	push	1
	push	-1
	push	-1
	call	esi

; 132  : 
; 133  :         ((PFNGLBINDFRAMEBUFFERPROC)wglGetProcAddress("glBindFramebuffer"))(GL_FRAMEBUFFER, 0);

	push	0
	push	36160					; 00008d40H
	push	OFFSET ??_C@_0BC@CJMIBNO@glBindFramebuffer@
	call	ebx
	call	eax

; 134  :         ((PFNGLUSEPROGRAMPROC)wglGetProcAddress("glUseProgram"))(imgFsId);

	push	DWORD PTR _imgFsId$1$[esp+80]
	push	OFFSET ??_C@_0N@ICBDHBI@glUseProgram@
	call	ebx
	call	eax

; 135  :         glBindTexture(GL_TEXTURE_2D, renderTexture);

	push	DWORD PTR _renderTexture$[esp+80]
	push	3553					; 00000de1H
	call	DWORD PTR __imp__glBindTexture@8

; 136  :         glRects(-1, -1, 1, 1);

	push	1
	push	1
	push	-1
	push	-1
	call	esi

; 137  : 
; 138  :         wglSwapLayerBuffers( hDC, WGL_SWAP_MAIN_PLANE );

	push	1
	push	edi
	call	DWORD PTR __imp__wglSwapLayerBuffers@8

; 139  :         Sleep(1);

	push	1
	call	DWORD PTR __imp__Sleep@4

; 140  :     }while( (msg.message!=WM_KEYDOWN || msg.wParam!=VK_ESCAPE) && currentTime < endTime);

	cmp	DWORD PTR _msg$[esp+84], 256		; 00000100H
	jne	SHORT $LN7@entrypoint
	cmp	DWORD PTR _msg$[esp+88], 27		; 0000001bH
	je	SHORT $LN6@entrypoint
$LN7@entrypoint:
	fld	DWORD PTR _currentTime$1$[esp+80]
	fcomp	DWORD PTR __real@433f0000
	fnstsw	ax
	test	ah, 5
	jnp	$LL4@entrypoint
$LN6@entrypoint:

; 141  : 
; 142  :     ChangeDisplaySettings( 0, 0 );

	mov	ebp, DWORD PTR __imp__ChangeDisplaySettingsA@8
	xor	ebx, ebx
	push	ebx
	push	ebx
	call	ebp

; 143  :     ShowCursor(1);

	push	1
	call	DWORD PTR __imp__ShowCursor@4

; 144  : 
; 145  :     ExitProcess(0);

	push	ebx
	call	DWORD PTR __imp__ExitProcess@4
	pop	edi
	pop	esi
	pop	ebx
$LN17@entrypoint:
$LN1@entrypoint:
	pop	ebp

; 146  : }

	add	esp, 64					; 00000040H
	ret	0
$LN15@entrypoint:
?entrypoint@@YGXXZ ENDP					; entrypoint
_TEXT	ENDS
END
